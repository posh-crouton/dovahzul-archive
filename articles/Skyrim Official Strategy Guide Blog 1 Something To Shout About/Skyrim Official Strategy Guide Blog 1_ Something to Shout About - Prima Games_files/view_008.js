(()=>{var e=null,o=document.getElementById("wp-block-gamurs-auth-login-form");window.GAMURS_wordpress_blocks=window.GAMURS_wordpress_blocks||{},window.GAMURS_wordpress_blocks.auth=window.GAMURS_wordpress_blocks.auth||{},window.GAMURS_wordpress_blocks.auth.ui=window.GAMURS_wordpress_blocks.auth.ui||{},window.GAMURS_wordpress_blocks.auth.ui.login=window.GAMURS_wordpress_blocks.auth.ui.login||{},window.GAMURS_wordpress_blocks.auth.ui.login.resetState=function(){o.style.display="flex",o.querySelector('input[name="email"]').value="",o.querySelector('input[name="password"]').value="",Array.from(o.querySelectorAll("label.is-error-state .wp-block-gamurs-input__helper.added")).forEach((function(e){e.remove()})),Array.from(o.querySelectorAll("label")).forEach((function(e){e.classList.remove("is-error-state"),e.classList.add("is-enabled-state")})),Array.from(o.parentElement.querySelectorAll(".wp-block-gamurs-auth-login__message")).forEach((function(e){e.style.display="none"}))},o.addEventListener("submit",(function(t){t.preventDefault(),window.clearTimeout(e),e=window.setTimeout((async function(){document.getElementById("wp-block-gamurs-auth-login-generic-error").style.display="none",Array.from(o.querySelectorAll("label.is-error-state .wp-block-gamurs-input__helper.added")).forEach((function(e){e.remove()})),Array.from(o.querySelectorAll("label")).forEach((function(e){e.classList.remove("is-error-state"),e.classList.add("is-enabled-state")}));var e=o.querySelector('button[type="submit"]');if(e&&(e.disabled=!0),window.GAMURS_wordpress_blocks.auth.firebase&&window.GAMURS_wordpress_blocks.auth.firebase.auth){const s=new FormData(t.target),r=s.get("email"),l=s.get("password");try{const e=await window.GAMURS_wordpress_blocks.auth.firebase.auth.signInWithEmailAndPassword(r,l);console.log("logged in",e),window.snowplow&&window.snowplow("setUserId",e.uid),o.querySelector('label:has(input[name="email"])').value="",o.querySelector('label:has(input[name="password"])').value=""}catch(t){var a=document.createElement("span");switch(a.classList.add("wp-block-gamurs-input__helper"),a.classList.add("added"),t.code){case"auth/invalid-email":a.innerText="Invalid email address",o.querySelector('label:has(input[name="email"])').classList.remove("is-enabled-state"),o.querySelector('label:has(input[name="email"])').classList.add("is-error-state"),o.querySelector('label:has(input[name="email"])').appendChild(a);break;case"auth/missing-password":a.innerText="No password provided",o.querySelector('label:has(input[name="password"])').classList.remove("is-enabled-state"),o.querySelector('label:has(input[name="password"])').classList.add("is-error-state"),o.querySelector('label:has(input[name="password"])').appendChild(a);break;case"auth/invalid-credential":document.getElementById("wp-block-gamurs-auth-login-details-error").style.display="block";break;default:document.getElementById("wp-block-gamurs-auth-login-generic-error").style.display="block"}e&&(e.disabled=!1)}}}),200)}));var t=document.querySelector('#wp-block-gamurs-auth-login-form .wp-block-gamurs-icon[class*="icon-visibility"]'),a=document.querySelector('#wp-block-gamurs-auth-login-form input[name="password"]');t&&a&&t.addEventListener("click",(function(e){e.preventDefault(),window.snowplow&&window.snowplow("trackStructEvent",{category:"GAMURS Account",action:"Password Visibility Toggled",label:e.currentTarget.classList.contains("icon-visibility-on")?"Off":"On"}),e.currentTarget.classList.toggle("icon-visibility-off"),e.currentTarget.classList.toggle("icon-visibility-on"),a.type="password"===a.type?"text":"password"}));var s=document.getElementById("wp-block-gamurs-auth-login-forgot-password");s&&s.addEventListener("click",(function(e){e.preventDefault(),window.snowplow&&window.snowplow("trackStructEvent",{category:"GAMURS Account",action:"Forgot Password Clicked"}),window.GAMURS_wordpress_blocks.auth.ui.goToForgot()}));var r=document.getElementById("wp-block-gamurs-auth-login-dont-have-an-account");r&&r.addEventListener("click",(function(e){e.preventDefault(),window.snowplow&&window.snowplow("trackStructEvent",{category:"GAMURS Account",action:"Switch to Signup Screen Clicked"}),window.GAMURS_wordpress_blocks.auth.ui.goToSignup()}))})();